/*! jQuery.autoswapgallery (https://github.com/Takazudo/jQuery.autoswapgallery)
 * lastupdate: 2013-05-14
 * version: 0.0.0
 * author: 'Takazudo' Takeshi Takatsudo <takazudo@gmail.com>
 * License: MIT */
(function(){var t=[].slice,i={}.hasOwnProperty,e=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};(function(i){var r;return r={},r.Event=function(){function i(){}return i.prototype.on=function(t,i){var e,r,n,s,o;for(null==this._callbacks&&(this._callbacks={}),e=t.split(" "),s=0,o=e.length;o>s;s++)r=e[s],(n=this._callbacks)[r]||(n[r]=[]),this._callbacks[r].push(i);return this},i.prototype.once=function(t,i){return this.on(t,function(){return this.off(t,arguments.callee),i.apply(this,arguments)}),this},i.prototype.trigger=function(){var i,e,r,n,s,o,a;if(i=arguments.length>=1?t.call(arguments,0):[],r=i.shift(),n=null!=(a=this._callbacks)?a[r]:void 0){for(s=0,o=n.length;o>s&&(e=n[s],e.apply(this,i)!==!1);s++);return this}},i.prototype.off=function(t,i){var e,r,n,s,o,a;if(!t)return this._callbacks={},this;if(n=null!=(a=this._callbacks)?a[t]:void 0,!n)return this;if(!i)return delete this._callbacks[t],this;for(r=s=0,o=n.length;o>s;r=++s)if(e=n[r],e===i){n=n.slice(),n.splice(r,1),this._callbacks[t]=n;break}return this},i}(),r.Timer=function(t){function i(t){this.interval=t,this.anyRestartFired=!1}return e(i,t),i.prototype.stop=function(){return this._timerId?clearTimeout(this._timerId):void 0},i.prototype.restart=function(){var t=this;return this.anyRestartFired=!0,this.stop(),this._timerId=setInterval(function(){return t.trigger("tick")},this.interval),this},i}(r.Event),r.Gallery=function(){function t(t,e){this.$el=t,this.options=i.extend({},r.Gallery.defaults,e),this.currentIndex=0,this._maxIndex=this.$el.find(this.options.selector_item).length-1,this._timer=new r.Timer(this.options.interval),this._initializeFitty(),this._eventify(),this._startFirstTimer()}return t.defaults={interval:2e3,startDelay:2e3,selector_inner:null,selector_item:null},t.prototype._startFirstTimer=function(){var t=this;return this.options.startDelay?setTimeout(function(){return t._timer.anyRestartFired?void 0:t._timer.restart()},this.options.startDelay):this._timer.restart(),this},t.prototype._initializeFitty=function(){var t=this;return this.$el.touchdraghfitty({inner:this.options.selector_inner,item:this.options.selector_item}),this._fitty=this.$el.data("touchdraghfitty"),this._fitty.on("indexchange",function(i){return t.currentIndex=i.index}),this._fitty.on("dragstart",function(){return t._timer.stop()}),this._fitty.on("slideend",function(){return t._timer.restart()}),this},t.prototype._eventify=function(){var t=this;return this._timer.on("tick",function(){return t.next()}),this},t.prototype.adjustOverIndex=function(t){return 0>t?this._maxIndex:t>this._maxIndex?0:t},t.prototype.to=function(t){return t=this.adjustOverIndex(t),this._fitty.to(t,!0),this.currentIndex=t,this},t.prototype.next=function(){return this.to(this.currentIndex+1),this},t.prototype.prev=function(){return this.to(this.currentIndex-1),this},t}(),i.fn.autoswapgallery=function(t){return this.each(function(e,n){var s,o;s=i(n),o=new r.Gallery(s,t),s.data("autoswapgallery",o)})},i.AutoswapgalleryNs=r,i.Autoswapgallery=r.Gallery})(jQuery,window,document)}).call(this);