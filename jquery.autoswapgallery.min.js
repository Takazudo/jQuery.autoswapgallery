/*! jQuery.autoswapgallery (https://github.com/Takazudo/jQuery.autoswapgallery)
 * lastupdate: 2013-05-21
 * version: 0.1.0
 * author: 'Takazudo' Takeshi Takatsudo <takazudo@gmail.com>
 * License: MIT */
(function(){var t=[].slice,r={}.hasOwnProperty,i=function(t,i){function e(){this.constructor=t}for(var n in i)r.call(i,n)&&(t[n]=i[n]);return e.prototype=i.prototype,t.prototype=new e,t.__super__=i.prototype,t};(function(r){var e;return e={},e.Event=function(){function r(){}return r.prototype.on=function(t,r){var i,e,n,s,o;for(null==this._callbacks&&(this._callbacks={}),i=t.split(" "),s=0,o=i.length;o>s;s++)e=i[s],(n=this._callbacks)[e]||(n[e]=[]),this._callbacks[e].push(r);return this},r.prototype.once=function(t,r){return this.on(t,function(){return this.off(t,arguments.callee),r.apply(this,arguments)}),this},r.prototype.trigger=function(){var r,i,e,n,s,o,a;if(r=arguments.length>=1?t.call(arguments,0):[],e=r.shift(),n=null!=(a=this._callbacks)?a[e]:void 0){for(s=0,o=n.length;o>s&&(i=n[s],i.apply(this,r)!==!1);s++);return this}},r.prototype.off=function(t,r){var i,e,n,s,o,a;if(!t)return this._callbacks={},this;if(n=null!=(a=this._callbacks)?a[t]:void 0,!n)return this;if(!r)return delete this._callbacks[t],this;for(e=s=0,o=n.length;o>s;e=++s)if(i=n[e],i===r){n=n.slice(),n.splice(e,1),this._callbacks[t]=n;break}return this},r}(),e.Timer=function(t){function r(t){this.interval=t,this.anyRestartFired=!1}return i(r,t),r.prototype.stop=function(){return this._timerId?clearTimeout(this._timerId):void 0},r.prototype.restart=function(){var t=this;return this.anyRestartFired=!0,this.stop(),this._timerId=setInterval(function(){return t.trigger("tick")},this.interval),this},r}(e.Event),e.Gallery=function(){function t(t,i){this.$el=t,this.options=r.extend({},e.Gallery.defaults,i),this.currentIndex=0,this._maxIndex=this.$el.find(this.options.selector_item).length-1,this._timer=new e.Timer(this.options.interval),this._initializeFitty(),this._eventify(),this._startFirstTimer()}return t.defaults={interval:2e3,startDelay:2e3,selector_inner:null,selector_item:null,dragger:null},t.prototype._startFirstTimer=function(){var t=this;return this.options.startDelay?setTimeout(function(){return t._timer.anyRestartFired?void 0:t._timer.restart()},this.options.startDelay):this._timer.restart(),this},t.prototype._initializeFitty=function(){var t,r=this;return t={inner:this.options.selector_inner,item:this.options.selector_item},this.options.dragger&&(t.dragger=this.options.dragger,t.useonlydragger=!0),this.$el.touchdraghfitty(t),this._fitty=this.$el.data("touchdraghfitty"),this._fitty.on("indexchange",function(t){return r.currentIndex=t.index}),this._fitty.on("dragstart",function(){return r._timer.stop()}),this._fitty.on("dragend",function(){return r._timer.restart()}),this},t.prototype._eventify=function(){var t=this;return this._timer.on("tick",function(){return t.next()}),this},t.prototype.adjustOverIndex=function(t){return 0>t?this._maxIndex:t>this._maxIndex?0:t},t.prototype.to=function(t,r){var i;return null==r&&(r=!1),this._timer.restart(),t=this.adjustOverIndex(t),i=!r,this._fitty.to(t,i),this.currentIndex=t,this},t.prototype.next=function(){return this.to(this.currentIndex+1),this},t.prototype.prev=function(){return this.to(this.currentIndex-1),this},t}(),r.fn.autoswapgallery=function(t){return this.each(function(i,n){var s,o;s=r(n),o=new e.Gallery(s,t),s.data("autoswapgallery",o)})},r.AutoswapgalleryNs=e,r.Autoswapgallery=e.Gallery})(jQuery,window,document)}).call(this);