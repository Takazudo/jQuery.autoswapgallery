/*! jQuery.autoswapgallery (https://github.com/Takazudo/jQuery.autoswapgallery)
 * lastupdate: 2013-06-13
 * version: 0.2.1
 * author: 'Takazudo' Takeshi Takatsudo <takazudo@gmail.com>
 * License: MIT */
(function(){var t=[].slice,i={}.hasOwnProperty,r=function(t,r){function e(){this.constructor=t}for(var n in r)i.call(r,n)&&(t[n]=r[n]);return e.prototype=r.prototype,t.prototype=new e,t.__super__=r.prototype,t};(function(i){var e;return e={},e.Event=function(){function i(){}return i.prototype.on=function(t,i){var r,e,n,s,o;for(null==this._callbacks&&(this._callbacks={}),r=t.split(" "),s=0,o=r.length;o>s;s++)e=r[s],(n=this._callbacks)[e]||(n[e]=[]),this._callbacks[e].push(i);return this},i.prototype.once=function(t,i){return this.on(t,function(){return this.off(t,arguments.callee),i.apply(this,arguments)}),this},i.prototype.trigger=function(){var i,r,e,n,s,o,a;if(i=arguments.length>=1?t.call(arguments,0):[],e=i.shift(),n=null!=(a=this._callbacks)?a[e]:void 0){for(s=0,o=n.length;o>s&&(r=n[s],r.apply(this,i)!==!1);s++);return this}},i.prototype.off=function(t,i){var r,e,n,s,o,a;if(!t)return this._callbacks={},this;if(n=null!=(a=this._callbacks)?a[t]:void 0,!n)return this;if(!i)return delete this._callbacks[t],this;for(e=s=0,o=n.length;o>s;e=++s)if(r=n[e],r===i){n=n.slice(),n.splice(e,1),this._callbacks[t]=n;break}return this},i}(),e.Timer=function(t){function i(t){this.interval=t,this.anyRestartFired=!1}return r(i,t),i.prototype.stop=function(){return this._timerId?clearTimeout(this._timerId):void 0},i.prototype.restart=function(){var t=this;return this.anyRestartFired=!0,this.stop(),this._timerId=setInterval(function(){return t.trigger("tick")},this.interval),this},i}(e.Event),e.Gallery=function(t){function n(t,r){this.$el=t,this.options=i.extend({},e.Gallery.defaults,r),this.currentIndex=0,this._maxIndex=this.$el.find(this.options.selector_item).length-1,this.options.interval&&(this._timer=new e.Timer(this.options.interval)),this._initializeFitty(),this._eventify(),this._startFirstTimer()}return r(n,t),n.defaults={interval:2e3,startDelay:2e3,selector_inner:null,selector_item:null,dragger:null},n.prototype._startFirstTimer=function(){var t=this;return this._timer?(this.options.startDelay?setTimeout(function(){return t._timer.anyRestartFired?void 0:t._timer.restart()},this.options.startDelay):this._timer.restart(),this):this},n.prototype._initializeFitty=function(){var t,i=this;return t={inner:this.options.selector_inner,item:this.options.selector_item},this.options.dragger&&(t.dragger=this.options.dragger,t.useonlydragger=!0),this.$el.touchdraghfitty(t),this._fitty=this.$el.data("touchdraghfitty"),this._fitty.on("indexchange",function(t){return i.currentIndex=t.index,i._triggerItemchange(t.index)}),this._fitty.on("dragstart",function(){return null!=i._timer?i._timer.stop():void 0}),this._fitty.on("dragend",function(){return null!=i._timer?i._timer.restart():void 0}),this},n.prototype._eventify=function(){var t=this;return null!=this._timer&&this._timer.on("tick",function(){return t.next()}),this},n.prototype.adjustOverIndex=function(t){return 0>t?this._maxIndex:t>this._maxIndex?0:t},n.prototype._triggerItemchange=function(t){var i;return i={index:t},this.trigger("itemchange",i),this},n.prototype.to=function(t,i){var r;return null==i&&(i=!1),null!=this._timer&&this._timer.restart(),t=this.adjustOverIndex(t),r=!i,this._fitty.to(t,r),this.currentIndex=t,this},n.prototype.next=function(){return this.to(this.currentIndex+1),this},n.prototype.prev=function(){return this.to(this.currentIndex-1),this},n}(e.Event),i.fn.autoswapgallery=function(t){return this.each(function(r,n){var s,o;s=i(n),o=new e.Gallery(s,t),s.data("autoswapgallery",o)})},i.AutoswapgalleryNs=e,i.Autoswapgallery=e.Gallery})(jQuery,window,document)}).call(this);